"use strict";(()=>{let e=document.querySelectorAll(".footer__button-collapse");for(let t of e)t.classList.remove("footer__button-collapse--no-js"),t.addEventListener("click",(t=>{if(t.target.classList.contains("footer__button-collapse--closed")){for(let t of e)t.classList.add("footer__button-collapse--closed");t.target.classList.remove("footer__button-collapse--closed")}else t.target.classList.add("footer__button-collapse--closed")}));for(let t of e)t.classList.add("footer__button-collapse--closed");const t=(e,t)=>(e=e.trim()).length<=t?e:(e=e.slice(0,t)).trim()+"..",o=document.querySelector(".about-us p:last-of-type"),l=o.textContent;document.documentElement.clientWidth<1024&&(o.textContent=t(o.textContent,200)),window.addEventListener("resize",(()=>{document.documentElement.clientWidth<1024?o.textContent=t(o.textContent,200):o.textContent=l})),$('input[type="tel"]').mask("+7(999) 9999999");try{var c=localStorage.getItem("name"),a=localStorage.getItem("phone"),n=localStorage.getItem("question")}catch(e){s=!1,console.log(e)}let s=!0;const r=document.querySelector(".header__button-feedback"),u=document.querySelector(".popup-callback"),d=document.querySelector(".popup-callback__button-close"),p=document.querySelector(".popup-callback__wrapper"),i=document.querySelector('.popup-callback input[type="text"]'),m=document.querySelector('.popup-callback input[type="tel"]'),v=document.querySelector(".popup-callback textarea"),b=document.querySelector('.popup-callback button[type="submit'),y=document.querySelector(".body");r.addEventListener("click",(()=>{u.classList.add("popup-callback--opened"),u.addEventListener("click",k),window.addEventListener("keydown",f),y.classList.add("body--blocked"),c&&(i.value=c,m.focus()),a&&(m.value=a,v.focus()),n&&(v.value=n,b.focus())})),d.addEventListener("click",(()=>{u.classList.remove("popup-callback--opened"),u.removeEventListener("click",k),window.removeEventListener("keydown",f),y.classList.remove("body--blocked")}));const k=e=>{p.contains(e.target)||(u.classList.remove("popup-callback--opened"),y.classList.remove("body--blocked"))},f=e=>{"Escape"===e.key&&(u.classList.remove("popup-callback--opened"),y.classList.remove("body--blocked"),window.removeEventListener("keydown",f))};b.addEventListener("click",(e=>{i.value&&m.value&&v.value?s&&(localStorage.setItem("name",i.value),localStorage.setItem("phone",m.value),localStorage.setItem("question",v.value)):(e.stopPropagation(),e.preventDefault())}));const L=document.querySelector('.feedback-form input[type="text"]'),S=document.querySelector('.feedback-form input[type="tel"]'),g=document.querySelector(".feedback-form textarea"),_=document.querySelector('.feedback-form button[type="submit');c&&(L.value=c),a&&(S.value=a),n&&(g.value=n),_.addEventListener("click",(e=>{L.value&&S.value&&g.value?s&&(localStorage.setItem("name",L.value),localStorage.setItem("phone",S.value),localStorage.setItem("question",g.value)):(e.stopPropagation(),e.preventDefault())}))})();